<!-- header.html -->
{% macro zyfooter() -%}
<!-- bootstrap.js 依赖 jquery.js 和popper.js，因此在这里引入 -->
<script src="../static/bootstrap/jquery/jquery-3.7.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1-lts/dist/umd/popper.min.js"></script>
<script>
  window.addEventListener('DOMContentLoaded', function() {
    // Set the page size in bytes
    var pageSize = 0;

    // Calculate the total size of external resources in bytes
    var totalResourceSize = 2 * 1024 * 1024; // 2 MB

    var observer;
    if (window.PerformanceObserver) {
      observer = new PerformanceObserver(function(list) {
        var entries = list.getEntries();
        entries.forEach(function(entry) {
          totalResourceSize += entry.transferSize;
        });
      });

      observer.observe({
        entryTypes: ['resource']
      });
    } else {
      // Alternative solution or API Polyfill library
      // Add code here to get resource size
    }

    // Get the page size
    pageSize = document.documentElement.innerHTML.length;

    measureHeapSize();

    function measureHeapSize() {
      if (window.performance && window.performance.memory && window.performance.memory.usedJSHeapSize) {
        var heapSize = window.performance.memory.usedJSHeapSize;
        showResult(heapSize);
      } else {
        showResult(0);
      }
    }

    function showResult(heapSize) {
      var totalSize = pageSize + totalResourceSize + heapSize;

      var ccc;
if (totalSize >= 1024 * 1024) {
  totalSizeMB = (totalSize / (1024 * 1024)).toFixed(2) + ' MB';
  ccc = ((totalSize / (1024 * 1024)).toFixed(2) * 0.22).toFixed(3) + ' mg';
} else {
  totalSizeMB = (totalSize / 1024).toFixed(2) + ' KB';
  ccc = ((totalSize / (1024 * 1024)).toFixed(2) * 0.022).toFixed(3) + ' mg';
}

      var heapSizeMB;
      if (heapSize >= 1024 * 1024) {
        heapSizeMB = (heapSize / (1024 * 1024)).toFixed(2) + ' MB';
      } else {
        heapSizeMB = (heapSize / 1024).toFixed(2) + ' KB';
      }

      var resultDiv = document.getElementById('resultccc');
      resultDiv.innerHTML = '页面大小 ' + (pageSize / 1024).toFixed(2) + ' KB <br>' +
                            '外部资源 ' + (totalResourceSize / (1024 * 1024)).toFixed(2) + ' MB <br>' +
                            'js堆占用 ' + heapSizeMB + '<br>' +
                            '约' + totalSizeMB+'<br>'+
                             '节约碳消耗<br>'+ '<img src="../static/image/cc.svg" style="height: 15px" alt="碳消耗"></a>'+ccc;
    }
  });
</script>
<script type="text/javascript">function show_runtime(){window.setTimeout("show_runtime()",1000);X=new
Date("08/23/2023 12:36:42");
Y=new Date();T=(Y.getTime()-X.getTime());M=24*60*60*1000;
a=T/M;A=Math.floor(a);b=(a-A)*24;B=Math.floor(b);c=(b-B)*60;C=Math.floor((b-B)*60);D=Math.floor((c-C)*60);
runtime_span.innerHTML="本站勉强运行: "+A+"天"+B+"小时"+C+"分"+D+"秒"}show_runtime();</script>
<footer id="myFooter" class="py-3 bg-dark fixed-bottom">
    <div class="container">
        <!-- 时间代码 -->
        <span>由7trees提供支持 转载内容版权归作者及来源网站所有，本站原创内容转载请注明来源，商业媒体及纸媒请先联系：<a href="mailto:support@7trees.cn">support@7trees.cn</a></span>
        <p class="m-0 text-center text-white">Copyright &copy; zyBLOG 2023 <span id="runtime_span"></span></p>
    </div>
</footer>

<script>
    // Hide footer when scrolling
    let timeoutId;
    window.addEventListener('scroll', function() {
        clearTimeout(timeoutId);
        const footer = document.getElementById('myFooter');
        footer.style.display = 'none';

        timeoutId = setTimeout(function() {
            footer.style.display = 'block';
        }, 3200);
    });
</script>
<!-- bootstrap.js 依赖 jquery.js 和popper.js，因此在这里引入 -->
<script src="../static/bootstrap/jquery/jquery-3.7.1.min.js"></script>

<!--
    popper.js 采用 cdn 远程引入，意思是你不需要把它下载到本地。
    在实际的开发中推荐静态文件尽量都使用 cdn 的形式。
    教程采用本地引入是为了让读者了解静态文件本地部署的流程。
-->
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1-lts/dist/umd/popper.min.js"></script>

<!-- 引入bootstrap的js文件 -->
<script src="../static/bootstrap/js/bootstrap.min.js"></script>


<div class="top-bar">
<script>
  function copyAndAlert() {
    const text = "奇客舒";
    navigator.clipboard.writeText(text).then(function () {
      alert("已复制到剪切板，可在微信内搜索该公众号");
    }).catch(function (error) {
      alert("复制失败：" + error);
    });
  }
</script>
<div class="top-bar">
   <div>
    <a href="weixin://" onclick="copyAndAlert()" style="text-align: center;">
      <span style="color: red;">
        点击这里打开微信
      </span> 搜索“奇客舒”体验GPT-3.5
    </a>&nbsp;&nbsp;&nbsp;
  </div>
  <div class="close-button">
    <img src="../static/image/close.png" style="height: 28px" alt="关闭按钮">
  </div>
</div>
</div>
<script type="text/javascript">
  window.onload = function() {
    var closeButton = document.querySelector('.close-button');
    var topBar = document.querySelector('.top-bar');

    closeButton.addEventListener('click', function() {
      topBar.style.display = 'none';
    });
  };
</script>


{% endmacro %}