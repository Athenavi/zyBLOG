<!DOCTYPE html>
<!-- 网站主语言 -->
<html lang="zh-cn">
<head>
    <!-- 网站采用的字符编码 -->
    <meta charset="utf-8">
    <!-- 预留网站标题的位置 -->
    <title>{{ article_name }}</title>
    <!-- 引入bootstrap的css文件 -->
    <script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/popper.js/1.15.0/umd/popper.min.js"></script>
    <!-- 引入layer.js -->
    <link rel="stylesheet" href="../static/main.css">
    <link rel="stylesheet" href="../static/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
</head>


<body class="{{ theme }}" >
{% from 'header.html' import zytopbar %}
<!-- 调用topbar -->
{{ zytopbar() }}


<!-- 引入导航栏 -->
<!-- 定义导航栏 -->



<!-- 预留具体页面的位置 -->
<div class="container">
  <div class="row justify-content-md-center">
      <div class="card">
        <div class="card-body">
          <h3 class="card-title">{{ articleName }}</h3><span>author:{{ author }}</span><span>最近一次修订的日期:{{ blogDate }}</span>
          <hr>
              <div class="{{ theme }}">

            {{ article_content|safe }}
                  </div>
        </div>
      </div>

{% set per_page = 10 %}
{% set page = 2 %}
{% import "macros.html" as custom %}
<div id="comments-container">
  {% if comments %}
    <h2>Comments:</h2>
    <ul class="list-group">
      {% set comment_count = comments|length %}
      {% set total_pages = (comment_count // per_page) + (comment_count % per_page > 0) %}
      {% set start_index = (page - 1) * per_page %}
      {% set end_index = start_index + per_page %}
      {% for comment in comments[start_index:end_index] %}
        <li class="list-group-item">
          <span class="fw-bold">{{ comment.username }}:</span> {{ comment.comment }}
        </li>
      {% endfor %}
    </ul>

    {% if total_pages >= 1 %}
      <nav aria-label="Comment navigation">
        <ul class="pagination justify-content-center">
          {% if page > 1 %}
            <li class="page-item">
              <a class="page-link" href="{{ url_for('blog_detail', article=articleName, page=page-1) }}">最新</a>
            </li>
          {% endif %}
            {% if page == 2 %}
            <li class="page-item">
              <a class="page-link" href="{{ url_for('blog_detail', article=articleName, page=page) }}">默认</a>
            </li>
          {% endif %}
            <li class="page-item">
              <a class="page-link" href="{{ url_for('blog_detail', article=articleName, page=page+1) }}">最初</a>
            </li>
        </ul>
      </nav>
    {% endif %}
  {% else %}
    <p class="alert alert-info">No comments available.</p>
  {% endif %}

  <!-- Your code for processing comments can go here -->
</div>


  </div>
</div>
<!-- 引入注脚 -->

<div>
    <br><br><br>
</div>

{% from 'footer.html' import zyfooter %}
<!-- 调用footer -->
{{ zyfooter() }}

</body>
</html>